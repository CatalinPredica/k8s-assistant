<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>K8S Assistant Helm Repo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      line-height: 1.6;
      color: #333;
      text-align: center;
    }
    h1 { color: #0052cc; }
    code {
      background: #f4f4f4;
      padding: 4px 6px;
      border-radius: 4px;
    }
    a { color: #0052cc; text-decoration: none; }
    a:hover { text-decoration: underline; }
    .badges { margin: 20px 0; }
    .section { text-align: left; margin: 30px auto; }
    pre { background: #f4f4f4; padding: 10px; border-radius: 6px; overflow-x: auto; }
  </style>
  <!-- js-yaml library -->
  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
</head>
<body>
  <h1>K8S Assistant Helm Repository</h1>

  <div class="badges">
    <!-- Helm badge will be updated dynamically -->
    <a href="https://catalinpredica.github.io/k8s-assistant/">
      <img id="helm-badge" src="https://img.shields.io/badge/Helm-0.1.34-red" alt="Helm version">
    </a>
  </div>

  <div class="section">
    <p>Charts are available at:</p>
    <p><a href="https://catalinpredica.github.io/k8s-assistant/charts/">https://catalinpredica.github.io/k8s-assistant/charts/</a></p>
  </div>
  
  <div class="section">
    <p>To add this Helm repository, run:</p>
    <pre><code>helm repo add k8s-assistant https://catalinpredica.github.io/k8s-assistant/charts</code></pre>
  </div>
  
  <div class="section">
    <p>Once added, you can search and install charts:</p>
    <pre><code>helm search repo k8s-assistant
helm install my-release k8s-assistant/&lt;chart-name&gt;</code></pre>
  </div>

  <script>
    // Fetch and parse the charts/index.yaml
    fetch('charts/index.yaml')
      .then(res => res.text())
      .then(yamlText => {
        const data = jsyaml.load(yamlText);
        // Get version of k8s-assistant
        const version = data.entries['k8s-assistant'][0].version;
        // Update the badge
        const badge = document.getElementById('helm-badge');
        badge.src = `https://img.shields.io/badge/Helm-${version}-red`;
      })
      .catch(err => console.error("Failed to fetch/parse charts/index.yaml:", err));
  </script>
</body>
</html>
